var $url="/cms/settings/settingsChannelGroup",$urlDelete=$url+"/actions/delete",data=utils.init({siteId:utils.getQueryInt("siteId"),groups:null}),methods={updateGroups:function(t,i){this.groups=t.groups,utils.success(i)},apiList:function(t){var i=this;utils.loading(this,!0),$api.get($url,{params:{siteId:this.siteId}}).then(function(t){var e=t.data;i.groups=e.groups}).catch(function(t){utils.error(t)}).then(function(){utils.loading(i,!1),t&&utils.success(t)})},apiDelete:function(t){var i=this;utils.loading(this,!0),$api.post($urlDelete,{siteId:this.siteId,groupName:t}).then(function(t){var e=t.data;i.groups=e.groups,utils.success("栏目组删除成功！")}).catch(function(t){utils.error(t)}).then(function(){utils.loading(i,!1)})},btnEditClick:function(t){utils.openLayer({title:"编辑栏目组",url:utils.getCommonUrl("groupChannelLayerAdd",{siteId:this.siteId,groupId:t.id}),width:500,height:300})},btnAddClick:function(){utils.openLayer({title:"新增栏目组",url:utils.getCommonUrl("groupChannelLayerAdd",{siteId:this.siteId}),width:500,height:300})},btnDeleteClick:function(t){var i=this;utils.alertDelete({title:"删除栏目组",text:"此操作将删除栏目组 "+t.groupName+"，确定吗？",callback:function(){i.apiDelete(t.groupName)}})},onSort:function(t){var i=this.groups[t.oldIndex].id,e=t.oldIndex>t.newIndex,s=Math.abs(t.oldIndex-t.newIndex);this.btnOrderClick(i,e,s)},btnOrderClick:function(t,i,e){var s=this;utils.loading(this,!0),$api.post($url+"/actions/order",{siteId:this.siteId,groupId:t,isUp:i,rows:e}).then(function(t){var i=t.data;s.groups=i.groups,utils.success("栏目组排序成功！")}).catch(function(t){utils.error(t)}).then(function(){utils.loading(s,!1)})},btnCloseClick:function(){utils.removeTab()}},$vue=new Vue({el:"#main",components:{ElTableDraggable:ElTableDraggable},data:data,methods:methods,created:function(){utils.keyPress(null,this.btnCloseClick),this.apiList()}});