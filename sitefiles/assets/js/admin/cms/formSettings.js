var $url="/cms/forms/formSettings",data=utils.init({siteId:utils.getQueryInt("siteId"),formId:utils.getQueryInt("formId"),navType:"Settings",form:null,styleList:[],attributeNames:null,administratorSmsNotifyKeys:null,userSmsNotifyKeys:null,isSmsEnabled:null,isMailEnabled:null}),methods={apiGet:function(){var t=this;utils.loading(this,!0),$api.get($url,{params:{siteId:this.siteId,formId:this.formId}}).then(function(i){var e=i.data;t.form=_.assign({formId:t.formId},e.form),t.form.timeToStart&&"0001-01-01 00:00:00"!=t.form.timeToStart?t.form.timeToStart=new Date(t.form.timeToStart):t.form.timeToStart=new Date,t.form.timeToEnd&&"0001-01-01 00:00:00"!=t.form.timeToEnd?t.form.timeToEnd=new Date(t.form.timeToEnd):t.form.timeToEnd=new Date,0===t.form.pageSize&&(t.form.pageSize=30),t.styleList=e.styleList,t.attributeNames=e.attributeNames,t.administratorSmsNotifyKeys=e.administratorSmsNotifyKeys,t.userSmsNotifyKeys=e.userSmsNotifyKeys,t.isSmsEnabled=e.isSmsEnabled,t.isMailEnabled=e.isMailEnabled}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},apiSubmit:function(){var t=this;utils.loading(this,!0),$api.post($url,this.form).then(function(t){t.data;utils.success("设置保存成功！")}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},btnSubmitClick:function(){var t=this;this.$refs.form.validate(function(i){i&&t.apiSubmit()})},getAttributeText:function(t){return"AddDate"===t?"添加时间":t},btnNavClick:function(){location.href=utils.getCmsUrl("form"+this.navType,{siteId:this.siteId,formId:this.formId})},btnCloseClick:function(){utils.removeTab()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(this.btnSubmitClick,this.btnCloseClick),this.apiGet()}});