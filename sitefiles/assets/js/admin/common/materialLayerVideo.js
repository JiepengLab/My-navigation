var $urlUploadVideo=$apiUrl+"/common/material/layerVideo/actions/uploadVideo?siteId="+utils.getQueryInt("siteId"),$urlUploadImage=$apiUrl+"/common/material/layerVideo/actions/uploadImage?siteId="+utils.getQueryInt("siteId"),data=utils.init({activeName:"first",form:{siteId:utils.getQueryInt("siteId"),type:"upload",videoUrl:"",isPoster:!1,isAutoPlay:!1,isWidth:!1,isHeight:!1,imageUrl:"",width:"100%",height:"500px",isLinkToOriginal:!0},player:null}),methods={btnTabsClick:function(){"second"===this.activeName&&(this.player?(this.player.poster(this.form.isPoster?this.form.imageUrl:""),this.player.src([{src:this.form.videoUrl}])):this.player=videojs(this.$refs.videoPlayer,{poster:this.form.isPoster?this.form.imageUrl:"",sources:[{src:this.form.videoUrl}]}))},btnSubmitClick:function(){if(!this.form.videoUrl)return utils.error("请设置需要插入的视频文件！"),!1;var i=this.form.isPoster&&this.form.imageUrl?' imageUrl="'+this.form.imageUrl+'"':"",e=' isAutoPlay="'+this.form.isAutoPlay+'"',t=this.form.isWidth?' width="'+this.form.width+'"':"",s=this.form.isHeight?' height="'+this.form.height+'"':"";parent.$vue.insertHtml('<img src="/sitefiles/assets/images/video-clip.png" style="width: 333px; height: 333px"'+i+e+t+s+' playUrl="'+this.form.videoUrl+'" class="siteserver-stl-player" /><br/>'),utils.closeLayer()},btnCancelClick:function(){utils.closeLayer()},uploadVideoBefore:i=>!!/(\.mp4|\.flv|\.f4v|\.webm|\.m4v|\.mov|\.3gp|\.3g2)$/i.exec(i.name)||(utils.error("文件只能是视频格式，请选择有效的文件上传!"),!1),uploadImageBefore:i=>/(\.jpg|\.jpeg|\.bmp|\.gif|\.png|\.webp)$/i.exec(i.name)?!!(i.size/1024/1024<10)||(utils.error("上传图片大小不能超过 10MB!"),!1):(utils.error("文件只能是图片格式，请选择有效的文件上传!"),!1),uploadProgress:function(){utils.loading(this,!0)},uploadVideoSuccess:function(i){this.form.videoUrl=i.url,this.form.type="url",utils.loading(this,!1)},uploadImageSuccess:function(i){this.form.imageUrl=i.url,utils.loading(this,!1)},uploadError:function(i){utils.loading(this,!1);var e=JSON.parse(i.message);utils.error(e.message)}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(this.btnSubmitClick,this.btnCancelClick),this.pageLoad=!0}});