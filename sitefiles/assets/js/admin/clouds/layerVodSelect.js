var $urlCloud="cms/vod",data=utils.init({inputType:utils.getQueryString("inputType"),attributeName:utils.getQueryString("attributeName"),no:utils.getQueryInt("no"),count:0,videos:[],formInline:{keyword:"",currentPage:1,offset:0,limit:30}}),methods={insert:function(t){"Video"===this.inputType?parent.$vue.runFormLayerVideoUpload&&parent.$vue.runFormLayerVideoUpload(this.attributeName,this.no,t.playUrl,t.coverUrl):"TextEditor"===this.inputType&&parent.$vue.insertEditor(this.attributeName,'<img src="/sitefiles/assets/images/video-clip.png" style="width: 333px; height: 333px" imageUrl="'+t.coverUrl+'" playUrl="'+t.playUrl+'" class="siteserver-stl-player" /><br/>')},apiCloudGet:function(){var t=this;utils.loading(this,!0),cloud.get($urlCloud,{params:this.formInline}).then(function(e){var i=e.data;t.count=i.count,t.videos=i.videos}).catch(function(t){utils.error(t,{ignoreAuth:!0})}).then(function(){utils.loading(t,!1)})},btnSearchClick:function(){this.apiCloudGet()},handleCurrentChange:function(t){this.formInline.currentPage=t,this.formInline.offset=this.formInline.limit*(t-1),this.btnSearchClick()},btnViewClick:function(t){utils.openLayer({title:"预览视频",url:utils.getCommonUrl("editorLayerPreviewVideo",{videoUrl:t.playUrl}),width:600,height:500})},getSize:function(t){return(t.size/1024/1024).toFixed(2)},getDuration:function(t){return new Date(1e3*parseInt(t.duration)).toISOString().slice(14,19)},btnSelectClick:function(t){this.insert(t),utils.closeLayer()},btnCancelClick:function(){utils.closeLayer()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(null,this.btnCancelClick);var t=this;cloud.checkAuth(function(){t.apiCloudGet()})}});