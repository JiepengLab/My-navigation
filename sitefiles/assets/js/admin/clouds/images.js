var $url="/clouds/images",$urlCloud="cms/images",data=utils.init({activeName:"settings",count:0,images:[],formInline:{keyword:"",page:1,perPage:28},cloudType:null,isCloudImages:!1,imageData:[],dialogVisible:!1,image:null}),methods={apiGet:function(){var t=this;utils.loading(this,!0),$api.get($url).then(function(i){var e=i.data;t.cloudType=e.cloudType,t.isCloudImages=e.isCloudImages}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},apiSubmit:function(){var t=this;utils.loading(this,!0),$api.post($url,{isCloudImages:this.isCloudImages}).then(function(t){t.data;utils.success("免版权图库设置保存成功！")}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},checkCloudType:function(){return(!this.cloudType||"Free"==this.cloudType)&&(alert({title:"免版权图库",text:"系统检测到您的云助手版本为免费版，使用免版权图库设置功能请升级云助手版本！",type:"warning",confirmButtonText:"关 闭",showConfirmButton:!0,showCancelButton:!1,buttonsStyling:!1}),!0)},btnSubmitClick:function(){this.checkCloudType()||this.apiSubmit()},btnTabsClick:function(){"images"==this.activeName&&this.apiCloudGet()},getSmallUrl:function(t){return cloud.hostImages+"/"+t.smallUrl},getRegularUrl:function(t){return cloud.hostImages+"/"+t.regularUrl},apiCloudGet:function(){var t=this;utils.loading(this,!0),cloud.get($urlCloud,{params:this.formInline}).then(function(i){var e=i.data;for(var n of(t.count=e.count,e.images))t.images.push(n)}).catch(function(t){utils.error(t,{ignoreAuth:!0})}).then(function(){utils.loading(t,!1)})},btnSearchClick:function(){this.count=0,this.images=[],this.apiCloudGet()},isMore:function(){return this.count>this.formInline.page*this.formInline.perPage},btnMoreClick:function(){this.formInline.page++,this.apiCloudGet()},btnImageClick:function(t){this.image=t,this.imageData=[{type:"thumb",size:"200 x "+(this.image.height*(200/this.image.width)).toFixed(0)},{type:"small",size:"400 x "+(this.image.height*(400/this.image.width)).toFixed(0)},{type:"regular",size:"1080 x "+(this.image.height*(1080/this.image.width)).toFixed(0)}],this.dialogVisible=!0},getImageType:function(t){return"thumb"==t?"小尺寸":"small"==t?"中尺寸":"regular"==t?"大尺寸":""},getImageUrl:function(t){var i=this.image.regularUrl;return"thumb"==t?i=this.image.thumbUrl:"small"==t?i=this.image.smallUrl:"regular"==t?i=this.image.regularUrl:"full"==t&&(i=this.image.fullUrl),cloud.hostImages+"/"+i},btnViewClick:function(t){window.open(this.getImageUrl(t))},btnCopyClick:function(t){var i=this.getImageUrl(t);navigator.clipboard.writeText(i),utils.success("图片地址已复制！")},btnCloseClick:function(){utils.removeTab()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(this.btnSubmitClick,this.btnCloseClick);var t=this;cloud.checkAuth(function(){t.apiGet()})}});