var $url="/clouds/spell",$urlCloud="cms/spell",data=utils.init({activeName:"settings",count:0,cloudWords:[],isAdd:!1,formInline:{keyword:"",currentPage:1,offset:0,limit:30},form:{words:""},isCloudSpellingCheck:!1,isCloudSpellingCheckAuto:!1,isCloudSpellingCheckIgnore:!1,isCloudSpellingCheckWhiteList:!1}),methods={apiGet:function(){var i=this;utils.loading(this,!0),$api.get($url).then(function(t){var l=t.data;i.isCloudSpellingCheck=l.isCloudSpellingCheck,i.isCloudSpellingCheckAuto=l.isCloudSpellingCheckAuto,i.isCloudSpellingCheckIgnore=l.isCloudSpellingCheckIgnore,i.isCloudSpellingCheckWhiteList=l.isCloudSpellingCheckWhiteList}).catch(function(i){utils.error(i)}).then(function(){utils.loading(i,!1)})},apiSubmit:function(){var i=this;utils.loading(this,!0),$api.post($url,{isCloudSpellingCheck:this.isCloudSpellingCheck,isCloudSpellingCheckAuto:this.isCloudSpellingCheckAuto,isCloudSpellingCheckIgnore:this.isCloudSpellingCheckIgnore,isCloudSpellingCheckWhiteList:this.isCloudSpellingCheckWhiteList}).then(function(i){i.data;utils.success("文本纠错设置保存成功！")}).catch(function(i){utils.error(i)}).then(function(){utils.loading(i,!1)})},btnSubmitClick:function(){this.apiSubmit()},btnTabsClick:function(){"whitelist"==this.activeName&&this.apiCloudGet()},apiCloudGet:function(){var i=this;utils.loading(this,!0),cloud.get($urlCloud,{params:this.formInline}).then(function(t){var l=t.data;i.count=l.count,i.cloudWords=l.cloudWords}).catch(function(i){utils.error(i,{ignoreAuth:!0})}).then(function(){utils.loading(i,!1)})},apiCloudDelete:function(i){var t=this;utils.loading(this,!0),cloud.post($urlCloud+"/actions/delete",{id:i}).then(function(i){i.data;utils.success("错别字白名单删除成功！"),t.apiCloudGet()}).catch(function(i){utils.error(i,{ignoreAuth:!0})}).then(function(){utils.loading(t,!1)})},apiCloudSubmit:function(){var i=this;utils.loading(this,!0),cloud.post($urlCloud,{words:this.form.words}).then(function(t){t.data;utils.success("错别字白名单添加成功！"),i.isAdd=!1,i.apiCloudGet()}).catch(function(i){utils.error(i,{ignoreAuth:!0})}).then(function(){utils.loading(i,!1)})},btnAddClick:function(){this.isAdd=!0,this.form.words=""},btnSearchClick:function(){this.apiCloudGet()},handleCurrentChange:function(i){this.formInline.currentPage=i,this.formInline.offset=this.formInline.limit*(i-1),this.btnSearchClick()},btnDeleteClick:function(i){var t=this;utils.alertDelete({title:"删除错别字白名单",text:"此操作将删除错别字白名单 “"+i.word+"”，确定吗？",callback:function(){t.apiCloudDelete(i.id)}})},btnAddSubmitClick:function(){var i=this;this.$refs.form.validate(function(t){t&&i.apiCloudSubmit()})},btnCloseClick:function(){utils.removeTab()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(this.btnSubmitClick,this.btnCloseClick);var i=this;cloud.checkAuth(function(){i.apiGet()})}});