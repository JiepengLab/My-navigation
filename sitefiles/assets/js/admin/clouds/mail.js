var $url="/clouds/mail",data=utils.init({form:{isCloudMail:!1,cloudMailFromAlias:"",isCloudMailContentAdd:!1,isCloudMailContentEdit:!1,cloudMailAddress:""}}),methods={apiGet:function(){var i=this;utils.loading(this,!0),$api.get($url).then(function(t){var l=t.data;i.form.isCloudMail=l.isCloudMail,i.form.cloudMailFromAlias=l.cloudMailFromAlias,i.form.isCloudMailContentAdd=l.isCloudMailContentAdd,i.form.isCloudMailContentEdit=l.isCloudMailContentEdit,i.form.cloudMailAddress=l.cloudMailAddress}).catch(function(i){utils.error(i)}).then(function(){utils.loading(i,!1)})},apiSubmit:function(){var i=this;utils.loading(this,!0),$api.post($url,this.form).then(function(i){i.data;utils.success("邮件集成设置保存成功！")}).catch(function(i){utils.error(i)}).then(function(){utils.loading(i,!1)})},btnSubmitClick:function(){var i=this;this.$refs.form.validate(function(t){t&&i.apiSubmit()})},validateEmail:function(i,t,l){if(t){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?l():l(new Error("通知邮箱格式不正确"))}else l(new Error("请输入通知邮箱"))},btnCloseClick:function(){utils.removeTab()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(this.btnSubmitClick,this.btnCloseClick);var i=this;cloud.checkAuth(function(){i.apiGet()})}});