var $urlCloud="cms/images",data=utils.init({inputType:utils.getQueryString("inputType"),attributeName:utils.getQueryString("attributeName"),no:utils.getQueryInt("no"),count:0,images:[],formInline:{keyword:"",page:1,perPage:28},imageData:[],dialogVisible:!1,image:null}),methods={insert:function(t){if("Image"===this.inputType)parent.$vue.runMaterialLayerImageSelect&&parent.$vue.runMaterialLayerImageSelect(this.attributeName,this.no,t);else if("TextEditor"===this.inputType&&parent.$vue.runEditorLayerImage){var e='<img src="'+t+'" style="border: 0; max-width: 100%" />';parent.$vue.runEditorLayerImage(this.attributeName,e)}},getSmallUrl:function(t){return cloud.hostImages+"/"+t.smallUrl},getRegularUrl:function(t){return cloud.hostImages+"/"+t.regularUrl},apiCloudGet:function(){var t=this;utils.loading(this,!0),cloud.get($urlCloud,{params:this.formInline}).then(function(e){var i=e.data;for(var a of(t.count=i.count,i.images))t.images.push(a)}).catch(function(t){utils.error(t,{ignoreAuth:!0})}).then(function(){utils.loading(t,!1)})},btnSearchClick:function(){this.count=0,this.images=[],this.apiCloudGet()},isMore:function(){return this.count>this.formInline.page*this.formInline.perPage},btnMoreClick:function(){this.formInline.page++,this.apiCloudGet()},btnImageClick:function(t){this.image=t,this.imageData=[{type:"thumb",size:"200 x "+(this.image.height*(200/this.image.width)).toFixed(0)},{type:"small",size:"400 x "+(this.image.height*(400/this.image.width)).toFixed(0)},{type:"regular",size:"1080 x "+(this.image.height*(1080/this.image.width)).toFixed(0)}],this.dialogVisible=!0},getImageType:function(t){return"thumb"==t?"小尺寸":"small"==t?"中尺寸":"regular"==t?"大尺寸":""},getImageUrl:function(t){var e=this.image.regularUrl;return"thumb"==t?e=this.image.thumbUrl:"small"==t?e=this.image.smallUrl:"regular"==t?e=this.image.regularUrl:"full"==t&&(e=this.image.fullUrl),cloud.hostImages+"/"+e},btnViewClick:function(t){window.open(this.getImageUrl(t))},btnSelectClick:function(t){this.insert(this.getImageUrl(t)),this.btnCancelClick()},btnCancelClick:function(){utils.closeLayer()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(null,this.btnCancelClick),this.apiCloudGet()}});