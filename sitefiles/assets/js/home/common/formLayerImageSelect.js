var $url="/common/form/layerImageSelect",data=utils.init({inputType:utils.getQueryString("inputType"),attributeName:utils.getQueryString("attributeName"),no:utils.getQueryInt("no"),count:0,images:[],formInline:{siteId:utils.getQueryInt("siteId"),keyword:"",page:1,perPage:28}}),methods={insert:function(t){if("Image"===this.inputType)parent.$vue.runMaterialLayerImageSelect&&parent.$vue.runMaterialLayerImageSelect(this.attributeName,this.no,t);else if("TextEditor"===this.inputType&&parent.$vue.runEditorLayerImage){var e='<img src="'+t+'" style="border: 0; max-width: 100%" />';parent.$vue.runEditorLayerImage(this.attributeName,e)}},apiGet:function(){var t=this;utils.loading(this,!0),$api.get($url,{params:this.formInline}).then(function(e){var i=e.data;for(var n of(t.count=i.count,i.images))t.images.push(n)}).catch(function(t){utils.error(t)}).then(function(){utils.loading(t,!1)})},btnSearchClick:function(){this.count=0,this.images=[],this.apiGet()},isMore:function(){return this.count>this.formInline.page*this.formInline.perPage},btnMoreClick:function(){this.formInline.page++,this.apiGet()},btnImageClick:function(t){this.insert(t.imageUrl),this.btnCancelClick()},btnCancelClick:function(){utils.closeLayer()}},$vue=new Vue({el:"#main",data:data,methods:methods,created:function(){utils.keyPress(null,this.btnCancelClick),this.apiGet()}});