!function(e){"use strict";function t(){}function n(e,t,n,o){"addEventListener"in window?e.addEventListener(t,n,!!be&&(o||{})):"attachEvent"in window&&e.attachEvent("on"+t,n)}function o(e,t,n){"removeEventListener"in window?e.removeEventListener(t,n,!1):"detachEvent"in window&&e.detachEvent("on"+t,n)}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e){return _+"["+te+"] "+e}function a(e){Z&&"object"==typeof window.console&&console.log(r(e))}function u(e){"object"==typeof window.console&&console.warn(r(e))}function c(){var e;(function(){function t(e){return"true"===e}var n=X.substr(ee).split(":");te=n[0],P=e!==n[1]?Number(n[1]):P,W=e!==n[2]?t(n[2]):W,Z=e!==n[3]?t(n[3]):Z,$=e!==n[4]?Number(n[4]):$,L=e!==n[6]?t(n[6]):L,D=n[7],K=e!==n[8]?n[8]:K,F=n[9],H=n[10],ue=e!==n[11]?Number(n[11]):ue,Y.enable=e!==n[12]&&t(n[12]),oe=e!==n[13]?n[13]:oe,me=e!==n[14]?n[14]:me})(),a("Initialising iFrame ("+location.href+")"),function(){function e(e,t){return"function"==typeof e&&(a("Setup custom "+t+"CalcMethod"),ye[t]=e,e="custom"),e}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(function(){var e=window.iFrameResizer;a("Reading data from page: "+JSON.stringify(e)),he="messageCallback"in e?e.messageCallback:he,pe="readyCallback"in e?e.readyCallback:pe,ae="targetOrigin"in e?e.targetOrigin:ae,K="heightCalculationMethod"in e?e.heightCalculationMethod:K,me="widthCalculationMethod"in e?e.widthCalculationMethod:me}(),K=e(K,"height"),me=e(me,"width")),a("TargetOrigin for parent set to: "+ae)}(),e===D&&(D=P+"px"),s("margin",function(e,t){return-1!==t.indexOf("-")&&(u("Negative CSS value ignored for "+e),t=""),t}("margin",D)),s("background",F),s("padding",H),(e=document.createElement("div")).style.clear="both",e.style.display="block",document.body.appendChild(e),m(),g(),document.documentElement.style.height="",document.body.style.height="",a('HTML & body height set to "auto"'),a("Enable public methods"),ge.parentIFrame={autoResize:function(e){return!0===e&&!1===L?(L=!0,h()):!1===e&&!0===L&&(L=!1,p()),L},close:function(){A(0,0,"close"),a("Disable outgoing messages"),ie=!1,a("Remove event listener: Message"),o(window,"message",x),!0===L&&p()},getId:function(){return te},getPageInfo:function(e){"function"==typeof e?(ve=e,A(0,0,"pageInfo")):(ve=function(){},A(0,0,"pageInfoStop"))},moveToAnchor:function(e){Y.findTarget(e)},reset:function(){k("parentIFrame.reset")},scrollTo:function(e,t){A(t,e,"scrollTo")},scrollToOffset:function(e,t){A(t,e,"scrollToOffset")},sendMessage:function(e,t){A(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){K=e,m()},setWidthCalculationMethod:function(e){me=e,g()},setTargetOrigin:function(e){a("Set targetOrigin: "+e),ae=e},size:function(e,t){I("size","parentIFrame.size("+(e||"")+(t?","+t:"")+")",e,t)}},h(),Y=v(),I("init","Init message from host page"),pe()}function s(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,a("Body "+t+' set to "'+n+'"'))}function l(e){var t={add:function(t){function o(){I(e.eventName,e.eventType)}we[t]=o,n(window,t,o,{passive:!0})},remove:function(e){var t=we[e];delete we[e],o(window,e,t)}};e.eventNames&&Array.prototype.map?(e.eventName=e.eventNames[0],e.eventNames.map(t[e.method])):t[e.method](e.eventName),a(i(e.method)+" event listener: "+e.eventType)}function d(e){l({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),l({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),l({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),l({method:e,eventType:"Input",eventName:"input"}),l({method:e,eventType:"Mouse Up",eventName:"mouseup"}),l({method:e,eventType:"Mouse Down",eventName:"mousedown"}),l({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),l({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),l({method:e,eventType:"Ready State Change",eventName:"readystatechange"}),l({method:e,eventType:"Touch Start",eventName:"touchstart"}),l({method:e,eventType:"Touch End",eventName:"touchend"}),l({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),l({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),l({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),l({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===oe&&l({method:e,eventType:"IFrame Resized",eventName:"resize"})}function f(e,t,n,o){return t!==e&&(e in n||(u(e+" is not a valid option for "+o+"CalculationMethod."),e=t),a(o+' calculation method set to "'+e+'"')),e}function m(){K=f(K,U,Se,"height")}function g(){me=f(me,fe,Oe,"width")}function h(){var e;!0===L?(d("add"),e=0>$,window.MutationObserver||window.WebKitMutationObserver?e?y():q=w():(a("MutationObserver not supported in this browser!"),y())):a("Auto Resize disabled")}function p(){d("remove"),null!==q&&q.disconnect(),clearInterval(G)}function v(){function t(){return{x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}}function o(e){var n=e.getBoundingClientRect(),o=t();return{x:parseInt(n.left,10)+parseInt(o.x,10),y:parseInt(n.top,10)+parseInt(o.y,10)}}function i(t){var n=t.split("#")[1]||t,i=decodeURIComponent(n),r=document.getElementById(i)||document.getElementsByName(i)[0];e!==r?function(e){var t=o(e);a("Moving to in page link (#"+n+") at x: "+t.x+" y: "+t.y),A(t.y,t.x,"scrollToOffset")}(r):(a("In page link (#"+n+") not found in iFrame, so sending to parent"),A(0,0,"inPageLink","#"+n))}function r(){""!==location.hash&&"#"!==location.hash&&i(location.href)}return Y.enable?Array.prototype.forEach&&document.querySelectorAll?(a("Setting up location.hash handlers"),Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),function(e){"#"!==e.getAttribute("href")&&n(e,"click",function(e){e.preventDefault(),i(this.getAttribute("href"))})}),n(window,"hashchange",r),setTimeout(r,B)):u("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):a("In page linking not enabled"),{findTarget:i}}function y(){0!==$&&(a("setInterval: "+$+"ms"),G=setInterval(function(){I("interval","setInterval: "+$)},Math.abs($)))}function w(){function t(e){function t(e){!1===e.complete&&(a("Attach listeners to "+e.src),e.addEventListener("load",i,!1),e.addEventListener("error",r,!1),c.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function n(e){a("Remove listeners from "+e.src),e.removeEventListener("load",i,!1),e.removeEventListener("error",r,!1),function(e){c.splice(c.indexOf(e),1)}(e)}function o(t,o,i){n(t.target),I(o,i+": "+t.target.src,e,e)}function i(e){o(e,"imageLoad","Image loaded")}function r(e){o(e,"imageLoadFailed","Image load failed")}function u(e){I("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}var c=[],s=window.MutationObserver||window.WebKitMutationObserver,l=function(){var e=document.querySelector("body");return l=new s(u),a("Create body MutationObserver"),l.observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),l}();return{disconnect:function(){"disconnect"in l&&(a("Disconnect body MutationObserver"),l.disconnect(),c.forEach(n))}}}function b(e,t){var n=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?n=null!==(n=document.defaultView.getComputedStyle(t,null))?n[e]:0:n=function(e){if(/^\d+(px)?$/i.test(e))return parseInt(e,R);var n=t.style.left,o=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=n,t.runtimeStyle.left=o,e}(t.currentStyle[e]),parseInt(n,R)}function T(e,t){for(var n=t.length,o=0,r=0,u=i(e),c=Ee(),s=0;s<n;s++)(o=t[s].getBoundingClientRect()[e]+b("margin"+u,t[s]))>r&&(r=o);return c=Ee()-c,a("Parsed "+n+" HTML elements"),a("Element position calculated in "+c+"ms"),function(e){e>le/2&&a("Event throttle increased to "+(le=2*e)+"ms")}(c),r}function E(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function S(e,t){var n=document.querySelectorAll("["+t+"]");return 0===n.length&&(u("No tagged elements ("+t+") found on page"),document.querySelectorAll("body *")),T(e,n)}function O(){return document.querySelectorAll("body *")}function M(t,n,o,i){var r,u;!function(){function t(e,t){return!(Math.abs(e-t)<=ue)}return r=e!==o?o:Se[K](),u=e!==i?i:Oe[me](),t(J,r)||W&&t(de,u)}()&&"init"!==t?t in{init:1,interval:1,size:1}||!(K in ne||W&&me in ne)?t in{interval:1}||a("No change in size detected"):k(n):(N(),A(J=r,de=u,t))}function I(e,t,n,o){ce&&e in j?a("Trigger event cancelled: "+e):(e in{reset:1,resetPage:1,init:1}||a("Trigger event: "+t),"init"===e?M(e,t,n,o):Me(e,t,n,o))}function N(){ce||(ce=!0,a("Trigger event lock on")),clearTimeout(se),se=setTimeout(function(){ce=!1,a("Trigger event lock off"),a("--")},B)}function C(e){J=Se[K](),de=Oe[me](),A(J,de,e)}function k(e){var t=K;K=U,a("Reset trigger event: "+e),N(),C("reset"),K=t}function A(t,n,o,i,r){!0===ie&&(e===r?r=ae:a("Message targetOrigin: "+r),function(){var u=te+":"+t+":"+n+":"+o+(e!==i?":"+i:"");a("Sending message to host page ("+u+")"),re.postMessage(_+u,r)}())}function x(e){function t(){return e.data.split("]")[1].split(":")[0]}function n(){return e.data.substr(e.data.indexOf(":")+1)}function o(){return e.data.split(":")[2]in{true:1,false:1}}function i(){var n=t();n in r?r[n]():("undefined"==typeof module||!module.exports)&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||o()||u("Unexpected message ("+e.data+")")}var r={init:function(){X=e.data,re=e.source,c(),V=!1,setTimeout(function(){Q=!1},B)},reset:function(){Q?a("Page reset ignored by init"):(a("Page size reset by host page"),C("resetPage"))},resize:function(){I("resizeParent","Parent window requested size check")},moveToAnchor:function(){Y.findTarget(n())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var e=n();a("PageInfoFromParent called from parent: "+e),ve(JSON.parse(e)),a(" --")},message:function(){var e=n();a("MessageCallback called from parent: "+e),he(JSON.parse(e)),a(" --")}};_===(""+e.data).substr(0,ee)&&(!1===V?i():o()?r.init():a('Ignored message of type "'+t()+'". Received before initialization.'))}function z(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}if("undefined"!=typeof window){var L=!0,R=10,F="",P=0,D="",q=null,H="",W=!1,j={resize:1,click:1},B=128,V=!0,J=1,U="bodyOffset",K=U,Q=!0,X="",Y={},$=32,G=null,Z=!1,_="[iFrameSizer]",ee=_.length,te="",ne={max:1,min:1,bodyScroll:1,documentElementScroll:1},oe="child",ie=!0,re=window.parent,ae="*",ue=0,ce=!1,se=null,le=16,de=1,fe="scroll",me=fe,ge=window,he=function(){u("MessageCallback function not defined")},pe=function(){},ve=function(){},ye={height:function(){return u("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return u("Custom width calculation function not defined"),document.body.scrollWidth}},we={},be=!1;try{var Te=Object.create({},{passive:{get:function(){be=!0}},once:{get:function(){!0}}});window.addEventListener("test",t,Te),window.removeEventListener("test",t,Te)}catch(e){}var Ee=Date.now||function(){return(new Date).getTime()},Se={bodyOffset:function(){return document.body.offsetHeight+b("marginTop")+b("marginBottom")},offset:function(){return Se.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return ye.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,E(Se))},min:function(){return Math.min.apply(null,E(Se))},grow:function(){return Se.max()},lowestElement:function(){return Math.max(Se.bodyOffset()||Se.documentElementOffset(),T("bottom",O()))},taggedElement:function(){return S("bottom","data-iframe-height")}},Oe={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return ye.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Oe.bodyScroll(),Oe.documentElementScroll())},max:function(){return Math.max.apply(null,E(Oe))},min:function(){return Math.min.apply(null,E(Oe))},rightMostElement:function(){return T("right",O())},taggedElement:function(){return S("right","data-iframe-width")}},Me=function(e){var t,n,o,i=null,r=0,a=function(){r=Ee(),i=null,o=e.apply(t,n),i||(t=n=null)};return function(){var u=Ee();r||(r=u);var c=le-(u-r);return t=this,n=arguments,c<=0||c>le?(i&&(clearTimeout(i),i=null),r=u,o=e.apply(t,n),i||(t=n=null)):i||(i=setTimeout(a,c)),o}}(M);n(window,"message",x),n(window,"readystatechange",z),z()}}();