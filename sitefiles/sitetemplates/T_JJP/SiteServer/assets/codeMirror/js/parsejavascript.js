var JSParser=Editor.Parser=function(){function n(n,t,e,i,r,o){this.indented=n,this.column=t,this.type=e,null!=i&&(this.align=i),this.prev=r,this.info=o}function t(n){return function(t){var e=t&&t.charAt(0),i=n.type,r=e==i;return"vardef"==i?n.indented+4:"form"==i&&"{"==e?n.indented:"stat"==i||"form"==i?n.indented+indentUnit:"switch"!=n.info||r?n.align?n.column-(r?1:0):n.indented+(r?0:indentUnit):n.indented+(/^(?:case|default)\b/.test(t)?indentUnit:2*indentUnit)}}function e(e,r){function o(){for(;H[H.length-1].lex;)H.pop()();var n=G.next();if("whitespace"==n.type&&0==L&&(M=n.value.length),L+=n.value.length,"\n"==n.content&&(M=L=0,"align"in K||(K.align=!1),n.indentation=t(K)),"whitespace"==n.type||"comment"==n.type)return n;"align"in K||(K.align=!0);for(;;)if(D=F=!1,H.pop()(n.type,n.content),D)return F?n.style=F:"variable"==n.type&&d(n.content)&&(n.style="js-localvariable"),n}function a(){var n=I,t=K,e=H.concat([]),i=G.state;return function(r){return I=n,K=t,H=e.concat([]),L=M=0,G=tokenizeJavaScript(r,i),N}}function c(n){for(var t=n.length-1;t>=0;t--)H.push(n[t])}function u(){c(arguments),D=!0}function f(){c(arguments),D=!1}function l(n){F=n}function s(){I={prev:I,vars:{this:!0,arguments:!0}}}function v(){I=I.prev}function p(n){I&&(l("js-variabledef"),I.vars[n]=!0)}function d(n){for(var t=I;t;){if(t.vars[n])return!0;t=t.prev}return!1}function h(t,e){var i=function(){K=new n(M,L,t,null,K,e)};return i.lex=!0,i}function y(){K=K.prev}function b(n){return function(t){t==n?u():u(arguments.callee)}}function m(n){return f(g,m)}function g(n){"var"==n?u(h("vardef"),S,b(";"),y):"keyword a"==n?u(h("form"),w,g,y):"keyword b"==n?u(h("form"),g,y):"{"==n?u(h("}"),J,y):"function"==n?u(q):"for"==n?u(h("form"),b("("),h(")"),O,b(")"),y,g,y):"variable"==n?u(h("stat"),x):"switch"==n?u(h("form"),w,h("}","switch"),b("{"),J,y,y):"case"==n?u(w,b(":")):"default"==n?u(b(":")):"catch"==n?u(h("form"),s,b("("),B,b(")"),g,y,v):f(h("stat"),w,b(";"),y)}function w(n){i.hasOwnProperty(n)?u(k):"function"==n?u(q):"keyword c"==n?u(w):"("==n?u(h(")"),w,b(")"),y,k):"operator"==n?u(w):"["==n?u(h("]"),P(w,"]"),y,k):"{"==n&&u(h("}"),P(j,"}"),y,k)}function k(n){"operator"==n?u(w):"("==n?u(h(")"),w,P(w,")"),y,k):"."==n?u(U,k):"["==n&&u(h("]"),w,b("]"),y,k)}function x(n){":"==n?u(y,g):f(k,b(";"),y)}function U(n){"variable"==n&&(l("js-property"),u())}function j(n){"variable"==n&&l("js-property"),i.hasOwnProperty(n)&&u(b(":"),w)}function P(n,t){function e(i){","==i?u(n,e):i==t?u():u(b(t))}return function(i){i==t?u():f(n,e)}}function J(n){"}"==n?u():f(g,J)}function S(n,t){"variable"==n?(p(t),u(z)):u()}function z(n,t){"="==t?u(w,z):","==n&&u(S)}function O(n){"var"==n?u(S,C):";"==n?f(C):"variable"==n?u(A):f(C)}function A(n,t){"in"==t?u(w):u(k,C)}function C(n,t){";"==n?u(E):"in"==t?u(w):u(w,b(";"),E)}function E(n){")"==n?f():u(w)}function q(n,t){"variable"==n?(p(t),u(q)):"("==n&&u(s,P(B,")"),g,v)}function B(n,t){"variable"==n&&(p(t),u())}var D,F,G=tokenizeJavaScript(e),H=[m],I=null,K=new n((r||0)-indentUnit,0,"block",!1),L=0,M=0,N={next:o,copy:a};return y.lex=!0,N}var i={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};return{make:e,electricChars:"{}:"}}();