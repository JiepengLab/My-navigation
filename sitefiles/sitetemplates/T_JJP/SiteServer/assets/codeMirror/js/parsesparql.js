var SparqlParser=Editor.Parser=function(){function e(e){return new RegExp("^(?:"+e.join("|")+")$","i")}function t(e){return function(t){var n=t&&t.charAt(0);if(/[\]\}]/.test(n))for(;e&&"pattern"==e.type;)e=e.prev;var r=e&&n==matching[e.type];return e?"pattern"==e.type?e.col:e.align?e.col-(r?e.width:0):e.indent+(r?0:indentUnit):0}}function n(e){function n(e,t){a={prev:a,indent:u,col:p,type:e,width:t}}function r(){a=a.prev}var i=s(e),a=null,u=0,p=0,c={next:function(){var e=i.next(),s=e.style,c=e.content,o=e.value.length;if("\n"==c?(e.indentation=t(a),u=p=0,a&&null==a.align&&(a.align=!1)):"whitespace"==s&&0==p?u=o:"sp-comment"!=s&&a&&null==a.align&&(a.align=!0),"\n"!=c&&(p+=o),/[\[\{\(]/.test(c))n(c,o);else if(/[\]\}\)]/.test(c)){for(;a&&"pattern"==a.type;)r();a&&c==matching[a.type]&&r()}else"."==c&&a&&"pattern"==a.type?r():("sp-word"==s||"sp-prefixed"==s||"sp-uri"==s||"sp-var"==s||"sp-literal"==s)&&a&&/[\{\[]/.test(a.type)&&n("pattern",o);return e},copy:function(){var e=a,t=u,n=p,r=i.state;return function(o){return i=s(o,r),a=e,u=t,p=n,c}}};return c}var r=e(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","isblank","isliteral","union","a"]),i=e(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc"]),a=/[*+\-<>=&|]/,s=function(){function e(e,n){var s=e.next();if("$"==s||"?"==s)return e.nextWhileMatches(/[\w\d]/),"sp-var";if("<"!=s||e.matches(/[\s\u00a0=]/)){if('"'==s||"'"==s)return n(t(s)),null;if(/[{}\(\),\.;\[\]]/.test(s))return"sp-punc";if("#"==s){for(;!e.endOfLine();)e.next();return"sp-comment"}if(a.test(s))return e.nextWhileMatches(a),"sp-operator";if(":"==s)return e.nextWhileMatches(/[\w\d\._\-]/),"sp-prefixed";if(e.nextWhileMatches(/[_\w\d]/),e.equals(":"))return e.next(),e.nextWhileMatches(/[\w\d_\-]/),"sp-prefixed";var u,p=e.get();return u=r.test(p)?"sp-operator":i.test(p)?"sp-keyword":"sp-word",{style:u,content:p}}return e.nextWhileMatches(/[^\s\u00a0>]/),e.equals(">")&&e.next(),"sp-uri"}function t(t){return function(n,r){for(var i=!1;!n.endOfLine();){var a=n.next();if(a==t&&!i){r(e);break}i=!i&&"\\"==a}return"sp-literal"}}return function(t,n){return tokenizer(t,n||e)}}();return{make:n,electricChars:"}]"}}();