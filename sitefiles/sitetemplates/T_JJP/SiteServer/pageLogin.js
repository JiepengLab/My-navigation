var $api=new apiUtils.Api($apiConfig.apiUrl+"/v1/administrators/actions/login"),$innerApi=new apiUtils.Api($apiConfig.innerApiUrl+"/v1/administrators/actions/login"),$captchaGetUrl=$apiConfig.innerApiUrl+"/v1/captcha/LOGIN-CAPTCHA",$captchaCheckApi=new apiUtils.Api($apiConfig.innerApiUrl+"/v1/captcha/LOGIN-CAPTCHA/actions/check");window.top!=self&&(window.top.location=self.location);var $vue=new Vue({el:"#main",data:{pageLoad:!1,pageSubmit:!1,pageAlert:null,account:null,password:null,captcha:null,captchaUrl:null},directives:{focus:{inserted:function(i){i.focus()}}},methods:{reload:function(){this.pageLoad=!0,this.captchaUrl=$captchaGetUrl+"?r="+(new Date).getTime()},checkCaptcha:function(i,a,t){var n=this;pageUtils.loading(!0),$captchaCheckApi.post({captcha:t},function(t,e){if(pageUtils.loading(!1),t)return void(n.pageAlert={type:"danger",html:"验证码不正确，请重新输入！"});n.login(i,a)})},login:function(i,a){var t=this;pageUtils.loading(!0),$innerApi.post({account:i,password:md5(a)},function(n,e){if(pageUtils.loading(!1),n)return void(t.pageAlert={type:"danger",html:n.message});$apiConfig.isSeparatedApi?t.loginSeparatedApi(i,a):t.redirect()})},loginSeparatedApi:function(i,a){var t=this;pageUtils.loading(!0),$api.post({account:i,password:md5(a)},function(i,a){if(pageUtils.loading(!1),i)return void(t.pageAlert={type:"danger",html:'系统检测到API部署方式为独立部署且独立API不能正常工作，请联系系统维护人员修复此问题 <a href="pageInitialization.aspx">进入后台</a>'});t.redirect()})},redirect:function(){location.href="pageInitialization.aspx"},btnLoginClick:function(i){i.preventDefault(),this.pageSubmit=!0,this.pageAlert=null,this.account&&this.password&&this.captcha&&this.checkCaptcha(this.account,this.password,this.captcha)}}});$vue.reload();