!function(t){function o(t,o,e){for(var i=4,a=[];i--;)a[i]=Math.round(o.rgba[i]+(t.rgba[i]-o.rgba[i])*(1-e));return"rgba("+a.join(",")+")"}var e=t.Axis,i=t.Chart,a=t.Point,n=t.Pointer,r=t.each,l=t.extend,s=t.merge,h=t.pick,p=t.numberFormat,d=t.getOptions(),m=t.seriesTypes,c=d.plotOptions,u=t.wrap,x=t.Color,g=function(){};d.mapNavigation={buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}},t.splitPath=function(t){var o;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),o=0;o<t.length;o++)/[a-zA-Z]/.test(t[o])||(t[o]=parseFloat(t[o]));return t},t.maps={},u(e.prototype,"getSeriesExtremes",function(t){var o,e,i=this.isXAxis,a=[];r(this.series,function(t,o){t.useMapGeometry&&(a[o]=t.xData,t.xData=[])}),t.call(this),o=h(this.dataMin,Number.MAX_VALUE),e=h(this.dataMax,Number.MIN_VALUE),r(this.series,function(t,n){t.useMapGeometry&&(o=Math.min(o,t[i?"minX":"minY"]),e=Math.max(e,t[i?"maxX":"maxY"]),t.xData=a[n])}),this.dataMin=o,this.dataMax=e}),u(e.prototype,"setAxisTranslation",function(t){var o,e,i,a=this.chart,n=a.plotWidth/a.plotHeight,r=this.isXAxis,l=a.xAxis[0];t.call(this),"map"!==a.options.chart.type||r||void 0===l.transA||(this.transA=l.transA=Math.min(this.transA,l.transA),o=(l.max-l.min)/(this.max-this.min),i=o>n?this:l,e=(i.max-i.min)*i.transA,i.minPixelPadding=(i.len-e)/2)}),u(i.prototype,"render",function(o){var e=this,i=e.options.mapNavigation;o.call(e),e.renderMapNavigation(),i.zoomOnDoubleClick&&t.addEvent(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}),i.zoomOnMouseWheel&&t.addEvent(e.container,void 0===document.onmousewheel?"DOMMouseScroll":"mousewheel",function(t){e.pointer.onContainerMouseWheel(t)})}),l(n.prototype,{onContainerDblClick:function(t){var o=this.chart;t=this.normalize(t),o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&o.mapZoom(.5,o.xAxis[0].toValue(t.chartX),o.yAxis[0].toValue(t.chartY))},onContainerMouseWheel:function(t){var o,e=this.chart;t=this.normalize(t),o=t.detail||-t.wheelDelta/120,e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(o>0?2:.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY))}}),u(n.prototype,"init",function(t,o,e){t.call(this,o,e),e.mapNavigation.enableTouchZoom&&(this.pinchX=this.pinchHor=this.pinchY=this.pinchVert=!0)}),l(i.prototype,{renderMapNavigation:function(){var t,o,e,i=this,a=this.options.mapNavigation,n=a.buttons,r=function(){this.handler.call(i)};if(a.enableButtons)for(t in n)n.hasOwnProperty(t)&&(e=s(a.buttonOptions,n[t]),o=i.renderer.button(e.text,0,0,r).attr({width:e.width,height:e.height}).css(e.style).add(),o.handler=e.onclick,o.align(l(e,{width:o.width,height:o.height}),null,"spacingBox"))},fitToBox:function(t,o){return r([["x","width"],["y","height"]],function(e){var i=e[0],a=e[1];t[i]+t[a]>o[i]+o[a]&&(t[a]>o[a]?(t[a]=o[a],t[i]=o[i]):t[i]=o[i]+o[a]-t[a]),t[a]>o[a]&&(t[a]=o[a]),t[i]<o[i]&&(t[i]=o[i])}),t},mapZoom:function(t,o,e){if(!this.isMapZooming){var i,a=this,n=a.xAxis[0],r=n.max-n.min,l=h(o,n.min+r/2),s=r*t,p=a.yAxis[0],d=p.max-p.min,m=h(e,p.min+d/2),c=d*t,u=l-s/2,x=m-c/2,g=h(a.options.chart.animation,!0),f=a.fitToBox({x:u,y:x,width:s,height:c},{x:n.dataMin,y:p.dataMin,width:n.dataMax-n.dataMin,height:p.dataMax-p.dataMin});n.setExtremes(f.x,f.x+f.width,!1),p.setExtremes(f.y,f.y+f.height,!1),i=g?g.duration||500:0,i&&(a.isMapZooming=!0,setTimeout(function(){a.isMapZooming=!1},i)),a.redraw()}}}),c.map=s(c.scatter,{animation:!1,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{verticalAlign:"middle"},turboThreshold:0,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.y}<br/>"},states:{normal:{animation:!0}}});var f=t.extendClass(a,{applyOptions:function(o,e){var i=a.prototype.applyOptions.call(this,o,e);return i.path&&"string"==typeof i.path&&(i.path=i.options.path=t.splitPath(i.path)),i},onMouseOver:function(){clearTimeout(this.colorInterval),a.prototype.onMouseOver.call(this)},onMouseOut:function(){var t=this,e=+new Date,i=x(t.options.color),n=x(t.pointAttr.hover.fill),r=t.series.options.states.normal.animation,l=r&&(r.duration||500);l&&4===i.rgba.length&&4===n.rgba.length&&(delete t.pointAttr[""].fill,clearTimeout(t.colorInterval),t.colorInterval=setInterval(function(){var a=(new Date-e)/l,r=t.graphic;a>1&&(a=1),r&&r.attr("fill",o(n,i,a)),a>=1&&clearTimeout(t.colorInterval)},13)),a.prototype.onMouseOut.call(t)}});m.map=t.extendClass(m.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",pointClass:f,trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:g,supportsDrilldown:!0,getExtremesFromAll:!0,useMapGeometry:!0,init:function(o){var e,i,a,n,l,s,h,d,c,u,x=this,g=o.options.legend.valueDecimals,f=[],y="horizontal"===o.options.legend.layout;t.Series.prototype.init.apply(this,arguments),s=x.options.colorRange,h=x.options.valueRanges,h?(r(h,function(o){i=o.from,a=o.to,e="",void 0===i?e="< ":void 0===a&&(e="> "),void 0!==i&&(e+=p(i,g)),void 0!==i&&void 0!==a&&(e+=" - "),void 0!==a&&(e+=p(a,g)),f.push(t.extend({chart:x.chart,name:e,options:{},drawLegendSymbol:m.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},o))}),x.legendItems=f):s&&(i=s.from,a=s.to,n=s.fromLabel,l=s.toLabel,c=y?[0,0,1,0]:[0,1,0,0],y||(u=n,n=l,l=u),d={linearGradient:{x1:c[0],y1:c[1],x2:c[2],y2:c[3]},stops:[[0,i],[1,a]]},f=[{chart:x.chart,options:{},fromLabel:n,toLabel:l,color:d,drawLegendSymbol:this.drawLegendSymbolGradient,visible:!0,setState:function(){},setVisible:function(){}}],x.legendItems=f)},drawLegendSymbol:m.area.prototype.drawLegendSymbol,drawLegendSymbolGradient:function(t,o){var e,i,a,n,r,l=t.options.symbolPadding,s=h(t.options.padding,8),p=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,d="horizontal"===t.options.layout,m=h(t.options.rectangleLength,200);d?(e=-l/2,i=0):(e=-m+t.baseline-l/2,i=s+p),o.fromText=this.chart.renderer.text(o.fromLabel,i,e).attr({zIndex:2}).add(o.legendGroup),a=o.fromText.getBBox(),o.legendSymbol=this.chart.renderer.rect(d?a.x+a.width+l:a.x-p-l,a.y,d?m:p,d?p:m,2).attr({zIndex:1}).add(o.legendGroup),n=o.legendSymbol.getBBox(),o.toText=this.chart.renderer.text(o.toLabel,n.x+n.width+l,d?e:n.y+n.height-l).attr({zIndex:2}).add(o.legendGroup),r=o.toText.getBBox(),d?(t.offsetWidth=a.width+n.width+r.width+2*l+s,t.itemY=p+s):(t.offsetWidth=Math.max(a.width,r.width)+l+n.width+s,t.itemY=n.height+s,t.itemX=l)},getBox:function(t){var o=Number.MIN_VALUE,e=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE;r(t||this.options.data,function(t){for(var n=t.path,r=n.length,l=!1,s=Number.MIN_VALUE,h=Number.MAX_VALUE,p=Number.MIN_VALUE,d=Number.MAX_VALUE;r--;)"number"!=typeof n[r]||isNaN(n[r])||(l?(s=Math.max(s,n[r]),h=Math.min(h,n[r])):(p=Math.max(p,n[r]),d=Math.min(d,n[r])),l=!l);t._maxX=s,t._minX=h,t._maxY=p,t._minY=d,o=Math.max(o,s),e=Math.min(e,h),i=Math.max(i,p),a=Math.min(a,d)}),this.minY=a,this.maxY=i,this.minX=e,this.maxX=o},translatePath:function(t){var o,e=this,i=!1,a=e.xAxis,n=e.yAxis;for(t=[].concat(t),o=t.length;o--;)"number"==typeof t[o]&&(t[o]=i?Math.round(a.translate(t[o])):Math.round(n.len-n.translate(t[o])),i=!i);return t},setData:function(){t.Series.prototype.setData.apply(this,arguments),this.getBox()},translate:function(){var t=this,o=Number.MAX_VALUE,e=Number.MIN_VALUE;t.generatePoints(),r(t.data,function(i){i.shapeType="path",i.shapeArgs={d:t.translatePath(i.path)},"number"==typeof i.y&&(i.y>e?e=i.y:i.y<o&&(o=i.y))}),t.translateColors(o,e)},translateColors:function(t,e){var i,a,n=this.options,l=n.valueRanges,s=n.colorRange,h=this.colorKey;s&&(i=x(s.from),a=x(s.to)),r(this.data,function(r){var p,d,m,c,u=r[h];if(l){for(m=l.length;m--;)if(p=l[m],i=p.from,a=p.to,(void 0===i||u>=i)&&(void 0===a||u<=a)){d=p.color;break}}else s&&void 0!==u&&(c=1-(e-u)/(e-t),d=null===u?n.nullColor:o(i,a,c));d&&(r.color=null,r.options.color=d)})},drawGraph:g,drawDataLabels:g,drawPoints:function(){var o=this,e=o.xAxis,i=o.yAxis,a=o.colorKey;r(o.data,function(t){t.plotY=1,null===t[a]&&(t[a]=0,t.isNull=!0)}),m.column.prototype.drawPoints.apply(o),r(o.data,function(t){var o=t.dataLabels,n=e.toPixels(t._minX,!0),r=e.toPixels(t._maxX,!0),l=i.toPixels(t._minY,!0),s=i.toPixels(t._maxY,!0);t.plotX=Math.round(n+(r-n)*h(o&&o.anchorX,.5)),t.plotY=Math.round(l+(s-l)*h(o&&o.anchorY,.5)),t.isNull&&(t[a]=null)}),t.Series.prototype.drawDataLabels.call(o)},animateDrilldown:function(t){var o,e=this.chart.plotBox,i=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],a=i.bBox,n=this.chart.options.drilldown.animation;t||(o=Math.min(a.width/e.width,a.height/e.height),i.shapeArgs={scaleX:o,scaleY:o,translateX:a.x,translateY:a.y},r(this.points,function(t){t.graphic.attr(i.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},n)}),delete this.animate)},animateDrillupFrom:function(t){m.column.prototype.animateDrillupFrom.call(this,t)},animateDrillupTo:function(t){m.column.prototype.animateDrillupTo.call(this,t)}}),c.mapline=s(c.map,{lineWidth:1,backgroundColor:"none"}),m.mapline=t.extendClass(m.map,{type:"mapline",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth",fill:"backgroundColor"},drawLegendSymbol:m.line.prototype.drawLegendSymbol}),c.mappoint=s(c.scatter,{dataLabels:{enabled:!0,format:"{point.name}",color:"black",style:{textShadow:"0 0 5px white"}}}),m.mappoint=t.extendClass(m.scatter,{type:"mappoint"}),t.Map=function(o,e){var i,a={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null};return i=o.series,o.series=null,o=s({chart:{type:"map",panning:"xy"},xAxis:a,yAxis:s(a,{reversed:!0})},o,{chart:{inverted:!1}}),o.series=i,new t.Chart(o,e)}}(Highcharts);