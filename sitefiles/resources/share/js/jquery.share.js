!function(e){e.fn.share=function(t){var i=e(document.head),n={url:location.href,site_url:location.origin,source:i.find("[name=site], [name=Site]").attr("content")||document.title,title:i.find("[name=title], [name=Title]").attr("content")||document.title,description:i.find("[name=description], [name=Description]").attr("content")||"",image:e("img:first").prop("src")||"",imageSelector:void 0,weiboKey:"",wechatQrcodeTitle:"微信扫一扫：分享",wechatQrcodeHelper:"<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>",wechatQrcodeSize:100,mobileSites:[],sites:["weibo","qq","wechat","tencent","douban","qzone","linkedin","diandian","facebook","twitter","google"],disabled:[],initialized:!1},a=e.extend({},n,t),r={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}&pics={{IMAGE}}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}",tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",weibo:"https://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}",wechat:"javascript:;",douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11",diandian:"http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u={{URL}}&title={{TITLE}}&description={{DESCRIPTION}}&caption={{SUBHEAD}}&link={{URL}}&picture={{IMAGE}}",twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{SITE_URL}}",google:"https://plus.google.com/share?url={{URL}}"},o={qzone:"QQ空间",qq:"QQ",tencent:"腾讯微博",weibo:"微博",wechat:"微信",douban:"豆瓣",diandian:"点点",linkedin:"LinkedIn",facebook:"Facebook",twitter:"Twitter",google:"Google"};this.each(function(){if(e(this).data("initialized"))return!0;var t=e.extend({},a,e(this).data());t.imageSelector&&(t.image=e(t.imageSelector).map(function(){return e(this).prop("src")}).get().join("||"));var i=e(this).addClass("share-component social-share");!function(t,i){var n=function(t){0===t.mobileSites.length&&t.sites.length&&(t.mobileSites=t.sites);var i=(e(window).width()<=768?t.mobileSites:t.sites.length?t.sites:[]).slice(0),n=t.disabled;"string"==typeof i&&(i=i.split(/\s*,\s*/));"string"==typeof n&&(n=n.split(/\s*,\s*/));/MicroMessenger/i.test(navigator.userAgent)&&n.push("wechat");return n.length&&e.each(n,function(t,n){var a=e.inArray(n,i);-1!==a&&i.splice(a,1)}),i}(i);if("prepend"==i.mode&&n.reverse(),!n.length)return;e.each(n,function(n,a){var c=function(e,t){var i=r[e];for(var n in t.summary=t.description,t)if(t.hasOwnProperty(n)){var a=e+n.replace(/^[a-z]/,function(e){return e.toUpperCase()}),o=encodeURIComponent(void 0===t[a]?t[n]:t[a]);i=i.replace(new RegExp("{{"+n.toUpperCase()+"}}","g"),o)}return i}(a,i),s=i.initialized?t.find(".icon-"+a):e('<a class="social-share-icon icon-'+a+'"></a>');if(!s.length)return!0;s.prop("aria-label","分享到 "+o[a]),s.prop("href",c),"wechat"===a?s.prop("tabindex",-1):s.prop("target","_blank"),i.initialized||("prepend"==i.mode?t.prepend(s):t.append(s))})}(i,t),function(e,t){var i=e.find("a.icon-wechat");if(!i.length)return;i.append('<div class="wechat-qrcode"><h4>'+t.wechatQrcodeTitle+'</h4><div class="qrcode"></div><div class="help">'+t.wechatQrcodeHelper+"</div></div>"),i.find(".qrcode").qrcode({render:"image",size:t.wechatQrcodeSize,text:t.url}),i.offset().top<100&&i.find(".wechat-qrcode").addClass("bottom")}(i,t),e(this).data("initialized",!0)})},e(function(){e(".share-component,.social-share").share()})}(jQuery);