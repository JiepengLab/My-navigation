<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <title>管理后台</title> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"> <link href="/sitefiles/assets/css/font-awesome-4.7.0.min.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/css/ionicons-2.0.0.min.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/lib/elementui/themechalk/index.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/css/element-ui.css?v=1695605096452" rel="stylesheet" type="text/css"> <style> .el-upload, .el-upload-dragger {width: 100%;}
    .videojs {
      width: 100% !important;
      min-height: 300px;
    }
    .el-upload-dragger {
      height: 240px;
      padding: 20px;
      line-height: 22px;
    } </style> </head> <body> <div id="main"> <div v-if="this.pageLoad" style="display: none" :style="{display: ''}"> <el-form v-on:submit.native.prevent ref="form" :model="form" size="small"> <el-form-item> <el-radio-group v-model="form.type"> <el-radio-button label="upload">上传视频</el-radio-button> <el-radio-button label="url">视频地址</el-radio-button> <el-radio-button label="preview">预览视频</el-radio-button> </el-radio-group> </el-form-item> <el-form-item v-if="form.type === 'upload'"> <template v-if="isCloudVod"> <el-alert type="error" v-if="cloudUploadErrorMessage" :title="cloudUploadErrorMessage"></el-alert> <el-form style="margin: 20px 10px;" label-position="top"> <el-form-item> <el-upload :disabled="cloudUploadProgressPercent" :drag="true" :action="cloudUploadUrl" :auto-upload="true" :headers="{ Authorization: 'Bearer ' + cloudUploadToken }" :show-file-list="false" :before-upload="cloudUploadBefore" :http-request="cloudUploadRequest" :multiple="false"> <i class="el-icon-upload"></i> <div class="el-upload__text"> <strong> 将文件拖到此处，或 <em>点击上传</em> </strong> </div> <div class="el-upload__tip"> 支持3GP、ASF、AVI、DAT、DV、FLV、F4V、GIF、M2T、M4V、MJ2、MJPEG、MKV、MOV、MP4、MPE、MPG、MPEG、MTS、OGG、QT、RM、RMVB、SWF、TS、VOB、WMV、WEBM 等视频格式上传 </div> </el-upload> <el-progress v-if="cloudUploadProgressPercent" :text-inside="true" :stroke-width="26" :percentage="cloudUploadProgressPercent"></el-progress> </el-form-item> </el-form> </template> <template v-else> <el-upload drag :action="uploadVideoUrl" :auto-upload="true" :headers="{Authorization: 'Bearer ' + $token}" :show-file-list="false" :before-upload="uploadVideoBefore" :on-progress="uploadProgress" :on-success="uploadVideoSuccess" :on-error="uploadError" :multiple="false"> <i class="el-icon-upload"></i> <div class="el-upload__text"> 将视频文件拖到此处或点击上传，支持主流 <el-popover placement="bottom" title="视频格式" width="200" trigger="hover" content="mp4、flv、f4v、webm、m4v、mov、3gp、3g2"> <em slot="reference">视频格式</em> </el-popover> </div> </el-upload> </template> </el-form-item> <el-form-item v-if="form.type === 'url'" label="视频地址" prop="videoUrl" :rules="{ required: true, message: '请输入视频地址' }"> <el-input v-model="form.videoUrl"></el-input> </el-form-item> <el-form-item v-if="form.type === 'preview'"> <el-card> <video ref="videoPlayer" class="videojs vjs-default-skin vjs-big-play-centered" width="100%" height="300" controls preload="auto" data-setup="{}"> <source :src="getPreviewVideoUrl(form.videoUrl)"> </video> </el-card> </el-form-item> <el-form-item> <el-checkbox label="设置封面" v-model="form.isPoster"></el-checkbox> <el-checkbox label="自动播放" v-model="form.isAutoPlay"></el-checkbox> <el-checkbox label="设置宽度" v-model="form.isWidth"></el-checkbox> <el-checkbox label="设置高度" v-model="form.isHeight"></el-checkbox> </el-form-item> <el-form-item v-if="form.isPoster"> <el-upload drag :action="uploadImageUrl" :auto-upload="true" :headers="{Authorization: 'Bearer ' + $token}" :show-file-list="false" :before-upload="uploadImageBefore" :on-progress="uploadProgress" :on-success="uploadImageSuccess" :on-error="uploadError" :multiple="false"> <img v-if="form.imageUrl" :src="form.imageUrl" class="el-upload"> <div v-else> <i class="el-icon-upload"></i> <div class="el-upload__text"> 视频封面图，将图片文件拖到此处，或<em>点击上传</em> </div> </div> </el-upload> </el-form-item> <el-form-item v-if="form.isWidth" label="视频宽度"> <el-input v-model="form.width"></el-input> </el-form-item> <el-form-item v-if="form.isHeight" label="视频高度"> <el-input v-model="form.height"></el-input> </el-form-item> </el-form> <el-divider></el-divider> <el-row align="right" style="margin-right: 5px; margin-top: 10px;"> <el-col :span="24" align="right"> <el-button size="small" type="primary" v-on:click="btnSubmitClick">确 定</el-button> <el-button size="small" v-on:click="btnCancelClick">取 消</el-button> </el-col> </el-row> </div> <div v-else :style="{top: ($(window).height()/2 - 30) + 'px'}" v-loading="true" element-loading-text="页面加载中"></div> </div> </body> </html> <script src="/sitefiles/assets/lib/es6-promise.auto.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/axios-0.17.1.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/core-js-3.6.5.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/lodash-4.17.10.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/jquery-3.6.4.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/layer/layer-3.1.1.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/sweetalert2-7.28.4.all.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/vue-2.6.14.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/elementui/index.js?v=1695605096452"></script> <script src="/sitefiles/assets/lib/ElTableDraggable.umd.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/admin.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/utils.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/cloud.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/admin/common/editorLayerVideo.js?v=1695605096452" type="text/javascript"></script> 