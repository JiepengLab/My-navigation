<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <title>管理后台</title> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="renderer" content="webkit"> <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"> <link href="/sitefiles/assets/css/font-awesome-4.7.0.min.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/css/ionicons-2.0.0.min.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/lib/elementui/themechalk/index.css?v=1695605096452" rel="stylesheet" type="text/css"> <link href="/sitefiles/assets/css/element-ui.css?v=1695605096452" rel="stylesheet" type="text/css"> </head> <body> <div id="main"> <div v-if="this.pageLoad" style="display: none" :style="{display: ''}"> <el-table :data="rules" stripe style="width: 100%"> <el-table-column prop="type" label="验证规则" width="180"> </el-table-column> <el-table-column prop="value" label="参数" width="180"> </el-table-column> <el-table-column label="错误提示"> <template slot-scope="scope"> {{ scope.row.message }} </template> </el-table-column> <el-table-column label="操作" width="80"> <template slot-scope="scope"> <el-button v-on:click="btnRemoveClick(scope.row)" type="text" size="small">删除</el-button> </template> </el-table-column> </el-table> <div style="height: 10px"></div> <el-divider></el-divider> <div style="height: 10px"></div> <el-row align="left" style="margin-right: 5px"> <el-col :span="24" align="left"> <el-button size="small" v-on:click="btnAddClick">添加验证规则</el-button> </el-col> </el-row> <div style="height: 10px"></div> <el-divider></el-divider> <div style="height: 10px"></div> <el-row align="right" style="margin-right: 5px"> <el-col :span="24" align="right"> <el-button size="small" type="primary" v-on:click="btnSubmitClick">确 定</el-button> <el-button size="small" v-on:click="btnCancelClick">取 消</el-button> </el-col> </el-row> <el-drawer id="addForm" v-if="addForm" title="添加验证规则" ref="addPanel" :visible.sync="addPanel" destroy-on-close direction="rtl" size="80%"> <div class="drawer__content"> <el-form v-on:submit.native.prevent ref="addForm" size="mini" label-position="top" :model="addForm" label-width="160px"> <el-form-item label="验证规则" prop="type" :rules="{ required: true, message: '请选择验证规则' }"> <el-select v-model="addForm.type" v-on:change="handleRuleChange"> <el-option v-for="rule in getAvailableRules()" :key="rule.value" :value="rule.value">{{ rule.value + '：' + rule.label }}</el-option> </el-select> </el-form-item> <el-form-item v-if="addForm.type === 'Between'" label="最小值最大值" prop="value" :rules="{
          required: true, 
          validator: function(rule, value, callback) {
            if (!value) {
              return callback(new Error('请输入最小值最大值'));
            }
            if (/^\+?\d+,\d+$/.test(value)) {
              callback();
            } else {
              callback(new Error('请输入最小值最大值'));
            }
          }
        }"> <el-input v-model="addForm.value" placeholder="请输入最小值最大值，中间以逗号分隔"></el-input> </el-form-item> <el-form-item v-if="addForm.type === 'Included'" label="指定列表" prop="value" :rules="{ required: true, message: '请输入指定列表' }"> <el-input v-model="addForm.value" placeholder="请输入指定列表"></el-input> <div class="tips">列表项使用英文","分隔</div> </el-form-item> <el-form-item v-if="addForm.type === 'Max'" label="最多允许的字符数" prop="value" :rules="{
          required: true, 
          validator: function(rule, value, callback) {
            if (!value) {
              return callback(new Error('请输入最多允许的字符数'));
            }
            if (/^\+?\d+$/.test(value)) {
              callback();
            } else {
              callback(new Error('请输入数字值'));
            }
          }
        }"> <el-input v-model="addForm.value" placeholder="请输入最多允许的字符数"></el-input> </el-form-item> <el-form-item v-if="addForm.type === 'MaxValue'" label="允许的最大数值" prop="value" :rules="{
          required: true, 
          validator: function(rule, value, callback) {
            if (!value) {
              return callback(new Error('请输入允许的最大数值'));
            }
            if (/^\+?\d+$/.test(value)) {
              callback();
            } else {
              callback(new Error('请输入数字值'));
            }
          }
        }"> <el-input v-model="addForm.value" placeholder="请输入允许的最大数值"></el-input> </el-form-item> <el-form-item v-if="addForm.type === 'Min'" label="最少允许的字符数" prop="value" :rules="{
          required: true, 
          validator: function(rule, value, callback) {
            if (!value) {
              return callback(new Error('请输入最少允许的字符数'));
            }
            if (/^\+?\d+$/.test(value)) {
              callback();
            } else {
              callback(new Error('请输入数字值'));
            }
          }
        }"> <el-input v-model="addForm.value" placeholder="请输入最少允许的字符数"></el-input> </el-form-item> <el-form-item v-if="addForm.type === 'MinValue'" label="允许的最小数值" prop="value" :rules="{
          required: true, 
          validator: function(rule, value, callback) {
            if (!value) {
              return callback(new Error('请输入允许的最小数值'));
            }
            if (/^\+?\d+$/.test(value)) {
              callback();
            } else {
              callback(new Error('请输入数字值'));
            }
          }
        }"> <el-input v-model="addForm.value" placeholder="请输入允许的最小数值"></el-input> </el-form-item> <el-form-item v-if="addForm.type === 'Excluded'" label="指定列表" prop="value" :rules="{ required: true, message: '请输入指定列表' }"> <el-input v-model="addForm.value" placeholder="请输入指定列表"></el-input> <div class="tips">列表项使用英文","分隔</div> </el-form-item> <el-form-item v-if="addForm.type === 'Regex'" label="正则表达式" prop="value" :rules="{ required: true, message: '请输入正则表达式' }"> <el-input v-model="addForm.value" placeholder="请输入正则表达式"></el-input> <div class="tips">列表项使用英文","分隔</div> </el-form-item> <el-form-item v-if="addForm.type" label="错误提示" prop="message" :rules="{ required: true, message: '请输入错误提示' }"> <el-input v-model="addForm.message" placeholder="请输入错误提示"></el-input> </el-form-item> <el-divider></el-divider> <div class="drawer__footer"> <el-button type="primary" v-on:click="btnAddSubmitClick" size="small">确 定</el-button> <el-button size="small" v-on:click="btnAddCancelClick">取 消</el-button> </div> </el-form> </div> </el-drawer> </div> <div v-else :style="{top: ($(window).height()/2 - 30) + 'px'}" v-loading="true" element-loading-text="页面加载中"></div> </div> </body> </html> <script src="/sitefiles/assets/lib/es6-promise.auto.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/axios-0.17.1.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/core-js-3.6.5.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/lodash-4.17.10.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/jquery-3.6.4.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/layer/layer-3.1.1.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/sweetalert2-7.28.4.all.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/vue-2.6.14.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/lib/elementui/index.js?v=1695605096452"></script> <script src="/sitefiles/assets/lib/ElTableDraggable.umd.min.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/admin.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/utils.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/cloud.js?v=1695605096452" type="text/javascript"></script> <script src="/sitefiles/assets/js/admin/common/tableStyleLayerValidate.js?v=1695605096452" type="text/javascript"></script> 